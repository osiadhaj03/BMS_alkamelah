# ðŸ“Š ØªØºÙŠÙŠØ±Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª - BMS v2

> **Ø§Ù„ØªØ§Ø±ÙŠØ®:** 2025-12-01  
> **Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:** `bms_v2`  
> **Ø§Ù„Ø®Ø§Ø¯Ù…:** 145.223.98.97

---

## ðŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª

ØªÙ… ØªØ¨Ø³ÙŠØ· Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù‚Ø¯ÙŠÙ… (BMS_v1) ÙˆØ­Ø°Ù Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©.

---

## ðŸ—„ï¸ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠØ© (24 Ø¬Ø¯ÙˆÙ„)

### Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:
| Ø§Ù„Ø¬Ø¯ÙˆÙ„ | Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ù„Ø§Øª | Ø§Ù„ÙˆØµÙ |
|--------|-------------|-------|
| `books` | 12,009 | Ø§Ù„ÙƒØªØ¨ |
| `authors` | 3,622 | Ø§Ù„Ù…Ø¤Ù„ÙÙŠÙ† |
| `publishers` | 1,710 | Ø¯ÙˆØ± Ø§Ù„Ù†Ø´Ø± |
| `book_sections` | 40 | Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙƒØªØ¨ |
| `volumes` | 22,269 | Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª |
| `chapters` | 1,638,726 | Ø§Ù„ÙØµÙˆÙ„ |
| `pages` | 5,024,544 | Ø§Ù„ØµÙØ­Ø§Øª |
| `author_book` | 3,816 | Ø±Ø¨Ø· Ø§Ù„Ù…Ø¤Ù„ÙÙŠÙ† Ø¨Ø§Ù„ÙƒØªØ¨ |
| `book_extracted_metadata` | 2,065 | Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø© |

### Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…:
| Ø§Ù„Ø¬Ø¯ÙˆÙ„ | Ø§Ù„ÙˆØµÙ |
|--------|-------|
| `users` | Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† |
| `sessions` | Ø§Ù„Ø¬Ù„Ø³Ø§Øª |
| `cache` / `cache_locks` | Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª |
| `jobs` / `job_batches` / `failed_jobs` | Ø§Ù„Ù…Ù‡Ø§Ù… |
| `migrations` | Ø³Ø¬Ù„ Ø§Ù„Ù€ migrations |
| `password_reset_tokens` | Ø±Ù…ÙˆØ² Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† |
| `permissions` / `roles` / `model_has_*` / `role_has_*` | Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª (Spatie) |

---

## ðŸ“ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© Ù„ÙƒÙ„ Ø¬Ø¯ÙˆÙ„

### 1ï¸âƒ£ Ø¬Ø¯ÙˆÙ„ `books`

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint)
- shamela_id (varchar 50) â† Ø¬Ø¯ÙŠØ¯
- title (varchar 255)
- description (text)
- visibility (enum: public, private, restricted)
- book_section_id (FK â†’ book_sections)
- publisher_id (FK â†’ publishers)
- has_original_pagination (boolean) â† Ø¬Ø¯ÙŠØ¯
- additional_notes (text) â† Ø¬Ø¯ÙŠØ¯
- created_at, updated_at
```

#### âŒ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:
```
- slug
- cover_image
- cover_image_url
- published_year
- publisher (string - ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ù€ publisher_id)
- pages_count
- volumes_count
- status (draft, review, published, archived)
- source_url
- edition
- edition_DATA
- isbn
- original_format
- estimated_reading_time
- total_word_count
- total_character_count
- has_footnotes
- has_indexes
- has_references
- subjects
- keywords
- abstract
- doi
- hijri_date
- manuscript_info
- categories
```

---

### 2ï¸âƒ£ Ø¬Ø¯ÙˆÙ„ `authors`

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint)
- full_name (varchar 255, UNIQUE)
- biography (text)
- image (varchar 255)
- madhhab (enum: Ø§Ù„Ø­Ù†ÙÙŠØŒ Ø§Ù„Ù…Ø§Ù„ÙƒÙŠØŒ Ø§Ù„Ø´Ø§ÙØ¹ÙŠØŒ Ø§Ù„Ø­Ù†Ø¨Ù„ÙŠØŒ Ø¢Ø®Ø±ÙˆÙ†)
- is_living (boolean)
- birth_date (date)
- death_date (date)
- created_at, updated_at
```

#### âŒ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:
```
- birth_year (integer)
- death_year (integer)
- birth_year_type (gregorian, hijri)
- death_year_type (gregorian, hijri)
```

> **Ù…Ù„Ø§Ø­Ø¸Ø©:** ØªÙ… Ø¯Ù…Ø¬ Ø§Ù„Ø³Ù†ÙˆØ§Øª ÙÙŠ Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„ÙƒØ§Ù…Ù„Ø© `birth_date` Ùˆ `death_date`

---

### 3ï¸âƒ£ Ø¬Ø¯ÙˆÙ„ `book_sections`

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint)
- name (varchar 255)
- description (text)
- parent_id (FK â†’ book_sections, self-reference)
- sort_order (int)
- is_active (boolean)
- logo_path (varchar 500)
- created_at, updated_at
```

#### âŒ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:
```
- slug
- icon_type
- icon_url
- icon_name
- icon_color
- icon_size
- icon_library
- icon_custom_size
```

---

### 4ï¸âƒ£ Ø¬Ø¯ÙˆÙ„ `volumes`

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint)
- book_id (FK â†’ books)
- number (int)
- title (varchar 255)
- page_start (int)
- page_end (int)
- created_at, updated_at
```

âœ… **Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª - Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù…ÙƒØªÙ…Ù„**

---

### 5ï¸âƒ£ Ø¬Ø¯ÙˆÙ„ `chapters`

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint)
- volume_id (FK â†’ volumes)
- book_id (FK â†’ books)
- title (varchar 255)
- parent_id (FK â†’ chapters, self-reference)
- level (int) â† Ø¬Ø¯ÙŠØ¯ (Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† chapter_type)
- order (bigint)
- page_start (int)
- page_end (int)
- created_at, updated_at
```

#### âŒ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:
```
- chapter_number
- arabic_number
- chapter_type (main, sub)
- is_conclusion
- is_introduction
- is_appendix
- description
- section_type
- word_count
- has_subsections
- metadata (JSON)
```

---

### 6ï¸âƒ£ Ø¬Ø¯ÙˆÙ„ `pages`

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint)
- book_id (FK â†’ books)
- volume_id (FK â†’ volumes)
- chapter_id (FK â†’ chapters)
- page_number (int)
- internal_index (varchar 50)
- part (varchar 255)
- content (longtext)
- original_page_number (int) â† Ø¬Ø¯ÙŠØ¯
- html_content (longtext) â† Ø¬Ø¯ÙŠØ¯
- created_at, updated_at
```

#### âŒ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:
```
- shamela_page_id
- content_hash
- content_type
- word_count
- character_count
- has_images
- has_footnotes
- has_tables
- formatting_info (JSON)
- plain_text
- reading_time_minutes
```

---

### 7ï¸âƒ£ Ø¬Ø¯ÙˆÙ„ `publishers`

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint)
- name (varchar 255)
- address (varchar 255)
- city (varchar 255) â† Ø¬Ø¯ÙŠØ¯
- email (varchar 255)
- phone (varchar 255)
- description (text)
- website_url (varchar 255)
- image (varchar 255)
- is_active (boolean)
- created_at, updated_at
```

âœ… **Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø°ÙˆÙØ§Øª - ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© `city` ÙÙ‚Ø·**

---

### 8ï¸âƒ£ Ø¬Ø¯ÙˆÙ„ `author_book` (Pivot)

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint)
- book_id (FK â†’ books)
- author_id (FK â†’ authors)
- role (enum: author, co_author, editor, translator, reviewer, commentator)
- is_main (boolean)
- display_order (int)
- created_at, updated_at
```

âœ… **Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª - Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù…ÙƒØªÙ…Ù„**

---

### 9ï¸âƒ£ Ø¬Ø¯ÙˆÙ„ `book_extracted_metadata`

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint)
- book_id (FK â†’ books, UNIQUE)
- extracted_section_name, matched_section_id, section_match_confidence
- extracted_author_name, extracted_author_death_year, extracted_author_madhhab
- matched_author_id, author_match_confidence
- extracted_publisher_name, extracted_publisher_city
- matched_publisher_id, publisher_match_confidence
- extracted_edition, extracted_edition_number
- extracted_year_hijri, extracted_year_miladi
- extracted_tahqeeq_name, matched_tahqeeq_author_id
- extracted_pages_count, extracted_volumes_count
- is_processed, is_applied, needs_review
- processing_status (enum: pending, extracted, matched, applied, failed)
- error_message, extracted_at, applied_at
- created_at, updated_at
```

âœ… **Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø© Ù…Ù† Ù…Ù„ÙØ§Øª BOK**

---

### ðŸ”Ÿ Ø¬Ø¯ÙˆÙ„ `users`

#### Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
```sql
- id (PK, bigint) â† Ù„ÙŠØ³ UUID
- name (varchar 255)
- email (varchar 255, UNIQUE)
- email_verified_at (timestamp)
- password (varchar 255)
- remember_token (varchar 100)
- created_at, updated_at
```

#### âŒ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:
```
- uuid (primary key)
- username
- firstname
- lastname
- deleted_at (soft deletes)
```

> **Ù…Ù„Ø§Ø­Ø¸Ø©:** ØªÙ… ØªØ¨Ø³ÙŠØ· Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„ÙŠØ³ØªØ®Ø¯Ù… Ø¨Ù†ÙŠØ© Laravel Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©

---

## ðŸ”— Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„

```
book_sections (40)
    â”œâ”€â”€ parent_id â†’ book_sections (self)
    â””â”€â”€ books (12,009)
            â”œâ”€â”€ book_section_id â†’ book_sections
            â”œâ”€â”€ publisher_id â†’ publishers (1,710)
            â”œâ”€â”€ author_book (3,816) â†” authors (3,622)
            â”œâ”€â”€ volumes (22,269)
            â”‚       â””â”€â”€ chapters (1,638,726)
            â”‚               â””â”€â”€ pages (5,024,544)
            â””â”€â”€ book_extracted_metadata (2,065)
```

---

## ðŸ—‘ï¸ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©/ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

| Ø§Ù„Ø¬Ø¯ÙˆÙ„ | Ø§Ù„Ø­Ø§Ù„Ø© |
|--------|--------|
| `sections` | ÙØ§Ø±Øº - ÙŠØ¨Ø¯Ùˆ Ù…ÙƒØ±Ø± Ù…Ø¹ `book_sections` |
| `bok_imports` | Ù…Ø­Ø°ÙˆÙ - ØªÙ… Ø¯Ù…Ø¬Ù‡ Ù…Ø¹ `book_extracted_metadata` |
| `book_indexes` | Ù…Ø­Ø°ÙˆÙ |
| `references` | Ù…Ø­Ø°ÙˆÙ |
| `page_references` | Ù…Ø­Ø°ÙˆÙ |
| `annotations` | Ù…Ø­Ø°ÙˆÙ |
| `categories` | Ù…Ø­Ø°ÙˆÙ (ÙƒØ§Ù† ÙØ§Ø±ØºØ§Ù‹) |
| `borrowings` | Ù…Ø­Ø°ÙˆÙ (ÙƒØ§Ù† ÙØ§Ø±ØºØ§Ù‹) |
| `reservations` | Ù…Ø­Ø°ÙˆÙ (ÙƒØ§Ù† ÙØ§Ø±ØºØ§Ù‹) |
| `contact_us` | Ù…Ø­Ø°ÙˆÙ |
| `feedback_complaints` | Ù…Ø­Ø°ÙˆÙ |
| `banner_categories` | Ù…Ø­Ø°ÙˆÙ |
| `banner_contents` | Ù…Ø­Ø°ÙˆÙ |
| `blog_categories` | Ù…Ø­Ø°ÙˆÙ |
| `blog_posts` | Ù…Ø­Ø°ÙˆÙ |
| `menus` | Ù…Ø­Ø°ÙˆÙ |
| `folders` | Ù…Ø­Ø°ÙˆÙ |
| `media` | Ù…Ø­Ø°ÙˆÙ |
| `media_has_models` | Ù…Ø­Ø°ÙˆÙ |
| `folder_has_models` | Ù…Ø­Ø°ÙˆÙ |
| `activity_log` | Ù…Ø­Ø°ÙˆÙ |
| `filament_exceptions` | Ù…Ø­Ø°ÙˆÙ |
| `notifications` | Ù…Ø­Ø°ÙˆÙ |
| `personal_access_tokens` | Ù…Ø­Ø°ÙˆÙ |
| `settings` | Ù…Ø­Ø°ÙˆÙ |
| `tags` / `taggables` | Ù…Ø­Ø°ÙˆÙ |

---

## âœ… Ù…Ù„Ø®Øµ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª

1. **ØªØ¨Ø³ÙŠØ· Ø§Ù„Ø¨Ù†ÙŠØ©:** Ø­Ø°Ù Ø£ÙƒØ«Ø± Ù…Ù† 50 Ø¹Ù…ÙˆØ¯ ØºÙŠØ± Ø¶Ø±ÙˆØ±ÙŠ
2. **ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡:** Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„ÙØ§Ø±ØºØ© ÙˆØ§Ù„Ù…ÙƒØ±Ø±Ø©
3. **Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª:** Ø§Ù„ÙƒØªØ¨ØŒ Ø§Ù„Ù…Ø¤Ù„ÙÙŠÙ†ØŒ Ø§Ù„Ù†Ø§Ø´Ø±ÙŠÙ†ØŒ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
4. **Ø¥Ø¶Ø§ÙØ© Ù…ÙÙŠØ¯Ø©:** `book_extracted_metadata` Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† BOK
5. **Ø¯Ø¹Ù… Ø§Ù„ØªØ±Ù‚ÙŠÙ… Ø§Ù„Ø£ØµÙ„ÙŠ:** `original_page_number` Ùˆ `has_original_pagination`
6. **Ø¯Ø¹Ù… HTML:** `html_content` Ù„Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…Ù†Ø³Ù‚Ø©

---

> **Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©:** Ø¥Ù†Ø´Ø§Ø¡ Models Ùˆ Filament Resources Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ù†ÙŠØ©
